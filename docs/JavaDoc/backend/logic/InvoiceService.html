<!DOCTYPE HTML>
<html lang="de">
<head>
<!-- Generated by javadoc (21) on Mon Jun 09 09:36:19 CEST 2025 -->
<title>InvoiceService</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2025-06-09">
<meta name="description" content="declaration: package: backend.logic, class: InvoiceService">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript ist im Browser deaktiviert.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Navigationslinks umschalten"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Navigations-Links überspringen">Navigations-Links überspringen</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../index.html">Überblick</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Klasse</li>
<li><a href="package-tree.html">Baum</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html#class">Hilfe</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Übersicht:</p>
<ul>
<li>Verschachtelt</li>
<li><a href="#field-summary">Feld</a></li>
<li><a href="#constructor-summary">Konstruktor</a></li>
<li><a href="#method-summary">Methode</a></li>
</ul>
</li>
<li>
<p>Details:</p>
<ul>
<li><a href="#field-detail">Feld</a></li>
<li><a href="#constructor-detail">Konstruktor</a></li>
<li><a href="#method-detail">Methode</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Übersicht:&nbsp;</li>
<li>Verschachtelt&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Feld</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Konstruktor</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Methode</a></li>
</ul>
<ul class="sub-nav-list">
<li>Details:&nbsp;</li>
<li><a href="#field-detail">Feld</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Konstruktor</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Methode</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Suchen">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">backend.logic</a></div>
<h1 title="Klasse InvoiceService" class="title">Klasse InvoiceService</h1>
</div>
<div class="inheritance" title="Vererbungsbaum"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">backend.logic.InvoiceService</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">InvoiceService</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">Object</a></span></div>
<div class="block">Service class for managing invoices associated with users.
 Provides functionality to upload, validate, and insert invoices,
 and to check invoice data against OCR results.</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Feldübersicht</h2>
<div class="caption"><span>Felder</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifizierer und Typ</div>
<div class="table-header col-second">Feld</div>
<div class="table-header col-last">Beschreibung</div>
<div class="col-first even-row-color"><code>static <a href="../interfaces/ConnectionProvider.html" title="Schnittstelle in backend.interfaces">ConnectionProvider</a></code></div>
<div class="col-second even-row-color"><code><a href="#connectionProvider" class="member-name-link">connectionProvider</a></code></div>
<div class="col-last even-row-color">&nbsp;</div>
<div class="col-first odd-row-color"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a><wbr>&lt;<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&gt;</code></div>
<div class="col-second odd-row-color"><code><a href="#invoices" class="member-name-link">invoices</a></code></div>
<div class="col-last odd-row-color">&nbsp;</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Konstruktorübersicht</h2>
<div class="caption"><span>Konstruktoren</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Konstruktor</div>
<div class="table-header col-last">Beschreibung</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E()" class="member-name-link">InvoiceService</a>()</code></div>
<div class="col-last even-row-color">
<div class="block">Default constructor that initializes an empty invoice list.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><a href="#%3Cinit%3E(backend.model.User)" class="member-name-link">InvoiceService</a><wbr>(<a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;user)</code></div>
<div class="col-last odd-row-color">
<div class="block">Constructor that initializes the service with a given user.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Methodenübersicht</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">Alle Methoden</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Statische Methoden</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instanzmethoden</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Konkrete Methoden</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifizierer und Typ</div>
<div class="table-header col-second">Methode</div>
<div class="table-header col-last">Beschreibung</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#addInvoice(backend.model.Invoice)" class="member-name-link">addInvoice</a><wbr>(<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&nbsp;invoice)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Adds a new invoice to the database and handles OCR mismatch flagging and user flagging logic.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a><wbr>&lt;<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getAllInvoices(backend.model.User)" class="member-name-link">getAllInvoices</a><wbr>(<a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;user)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Retrieves all invoices for the given user from the database.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static <a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#getInvoiceById(int)" class="member-name-link">getInvoiceById</a><wbr>(int&nbsp;id)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Retrieves an invoice from the database by its unique ID.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a><wbr>&lt;<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&gt;</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#getInvoices()" class="member-name-link">getInvoices</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns the list of invoices currently managed by this service instance.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#invoiceDateAlreadyUsed(java.time.LocalDate,backend.model.User)" class="member-name-link">invoiceDateAlreadyUsed</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html" title="Klasse oder Schnittstelle in java.time" class="external-link">LocalDate</a>&nbsp;date,
 <a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;user)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks whether an invoice already exists for the given date and user.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#invoiceDateAlreadyUsed(java.time.LocalDate,backend.model.User,long)" class="member-name-link">invoiceDateAlreadyUsed</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html" title="Klasse oder Schnittstelle in java.time" class="external-link">LocalDate</a>&nbsp;date,
 <a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;user,
 long&nbsp;excludeInvoiceId)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks whether an invoice already exists for the given date and user,
 optionally excluding a specific invoice ID.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isAmountValid(java.lang.String)" class="member-name-link">isAmountValid</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;text)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Validates whether a given string can be interpreted as a valid amount (float).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isValidDate(java.time.LocalDate)" class="member-name-link">isValidDate</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html" title="Klasse oder Schnittstelle in java.time" class="external-link">LocalDate</a>&nbsp;date)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Validates whether a date is valid for invoice creation.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#isValidFloat(java.lang.String)" class="member-name-link">isValidFloat</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;text)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Checks whether a given string is a valid float number.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static boolean</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#isWorkday(java.time.LocalDate)" class="member-name-link">isWorkday</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html" title="Klasse oder Schnittstelle in java.time" class="external-link">LocalDate</a>&nbsp;date)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">Checks whether the given date falls on a workday (Monday to Friday).</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#loadInvoice(backend.model.Reimbursement)" class="member-name-link">loadInvoice</a><wbr>(<a href="../model/Reimbursement.html" title="Klasse in backend.model">Reimbursement</a>&nbsp;reimbursement)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Loads the invoice associated with the given reimbursement.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code>static void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4"><code><a href="#setConnectionProvider(backend.interfaces.ConnectionProvider)" class="member-name-link">setConnectionProvider</a><wbr>(<a href="../interfaces/ConnectionProvider.html" title="Schnittstelle in backend.interfaces">ConnectionProvider</a>&nbsp;provider)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab1 method-summary-table-tab4">
<div class="block">secures database connection</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>boolean</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#updateInvoiceIfChanged(backend.model.Invoice,backend.model.Invoice,backend.model.User,boolean)" class="member-name-link">updateInvoiceIfChanged</a><wbr>(<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&nbsp;oldInvoice,
 <a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&nbsp;newInvoice,
 <a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;invoiceUser,
 boolean&nbsp;selfmade)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Updates an existing invoice in the database if any of its attributes have changed.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Von Klasse geerbte Methoden&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="Klasse oder Schnittstelle in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="Klasse oder Schnittstelle in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="Klasse oder Schnittstelle in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="Klasse oder Schnittstelle in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="Klasse oder Schnittstelle in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="Klasse oder Schnittstelle in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="Klasse oder Schnittstelle in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="Klasse oder Schnittstelle in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="Klasse oder Schnittstelle in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="Klasse oder Schnittstelle in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="Klasse oder Schnittstelle in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Felddetails</h2>
<ul class="member-list">
<li>
<section class="detail" id="connectionProvider">
<h3>connectionProvider</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../interfaces/ConnectionProvider.html" title="Schnittstelle in backend.interfaces">ConnectionProvider</a></span>&nbsp;<span class="element-name">connectionProvider</span></div>
</section>
</li>
<li>
<section class="detail" id="invoices">
<h3>invoices</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a>&lt;<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&gt;</span>&nbsp;<span class="element-name">invoices</span></div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Konstruktordetails</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;()">
<h3>InvoiceService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">InvoiceService</span>()</div>
<div class="block">Default constructor that initializes an empty invoice list.</div>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(backend.model.User)">
<h3>InvoiceService</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">InvoiceService</span><wbr><span class="parameters">(<a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;user)</span></div>
<div class="block">Constructor that initializes the service with a given user.
 Loads all invoices for the user if a connection provider is available.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>user</code> - the user for whom invoices are to be managed</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Methodendetails</h2>
<ul class="member-list">
<li>
<section class="detail" id="setConnectionProvider(backend.interfaces.ConnectionProvider)">
<h3>setConnectionProvider</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">setConnectionProvider</span><wbr><span class="parameters">(<a href="../interfaces/ConnectionProvider.html" title="Schnittstelle in backend.interfaces">ConnectionProvider</a>&nbsp;provider)</span></div>
<div class="block">secures database connection</div>
</section>
</li>
<li>
<section class="detail" id="invoiceDateAlreadyUsed(java.time.LocalDate,backend.model.User)">
<h3>invoiceDateAlreadyUsed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">invoiceDateAlreadyUsed</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html" title="Klasse oder Schnittstelle in java.time" class="external-link">LocalDate</a>&nbsp;date,
 <a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;user)</span></div>
<div class="block">Checks whether an invoice already exists for the given date and user.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>date</code> - the date to check</dd>
<dd><code>user</code> - the user whose invoices are checked</dd>
<dt>Gibt zurück:</dt>
<dd>true if an invoice with the same date already exists, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="invoiceDateAlreadyUsed(java.time.LocalDate,backend.model.User,long)">
<h3>invoiceDateAlreadyUsed</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">invoiceDateAlreadyUsed</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html" title="Klasse oder Schnittstelle in java.time" class="external-link">LocalDate</a>&nbsp;date,
 <a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;user,
 long&nbsp;excludeInvoiceId)</span></div>
<div class="block">Checks whether an invoice already exists for the given date and user,
 optionally excluding a specific invoice ID.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>date</code> - the date to check</dd>
<dd><code>user</code> - the user whose invoices are checked</dd>
<dd><code>excludeInvoiceId</code> - the ID of an invoice to exclude from the check</dd>
<dt>Gibt zurück:</dt>
<dd>true if a duplicate date is found, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isValidDate(java.time.LocalDate)">
<h3>isValidDate</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isValidDate</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html" title="Klasse oder Schnittstelle in java.time" class="external-link">LocalDate</a>&nbsp;date)</span></div>
<div class="block">Validates whether a date is valid for invoice creation.
 A valid date must be within the current month, not in the future, and a workday.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>date</code> - the date to validate</dd>
<dt>Gibt zurück:</dt>
<dd>true if the date is valid, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isWorkday(java.time.LocalDate)">
<h3>isWorkday</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isWorkday</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/time/LocalDate.html" title="Klasse oder Schnittstelle in java.time" class="external-link">LocalDate</a>&nbsp;date)</span></div>
<div class="block">Checks whether the given date falls on a workday (Monday to Friday).</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>date</code> - the date to check</dd>
<dt>Gibt zurück:</dt>
<dd>true if the date is a workday, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isValidFloat(java.lang.String)">
<h3>isValidFloat</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isValidFloat</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;text)</span></div>
<div class="block">Checks whether a given string is a valid float number.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>text</code> - the text to validate</dd>
<dt>Gibt zurück:</dt>
<dd>true if the text represents a float, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="isAmountValid(java.lang.String)">
<h3>isAmountValid</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">isAmountValid</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="Klasse oder Schnittstelle in java.lang" class="external-link">String</a>&nbsp;text)</span></div>
<div class="block">Validates whether a given string can be interpreted as a valid amount (float).</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>text</code> - the string to validate</dd>
<dt>Gibt zurück:</dt>
<dd>true if the amount is valid, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getAllInvoices(backend.model.User)">
<h3>getAllInvoices</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a>&lt;<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&gt;</span>&nbsp;<span class="element-name">getAllInvoices</span><wbr><span class="parameters">(<a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;user)</span></div>
<div class="block">Retrieves all invoices for the given user from the database.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>user</code> - the user whose invoices are to be retrieved</dd>
<dt>Gibt zurück:</dt>
<dd>a list of invoices</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getInvoices()">
<h3>getInvoices</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/List.html" title="Klasse oder Schnittstelle in java.util" class="external-link">List</a>&lt;<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&gt;</span>&nbsp;<span class="element-name">getInvoices</span>()</div>
<div class="block">Returns the list of invoices currently managed by this service instance.</div>
<dl class="notes">
<dt>Gibt zurück:</dt>
<dd>the list of invoices</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="addInvoice(backend.model.Invoice)">
<h3>addInvoice</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">addInvoice</span><wbr><span class="parameters">(<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&nbsp;invoice)</span></div>
<div class="block">Adds a new invoice to the database and handles OCR mismatch flagging and user flagging logic.
 Also persists flagged user updates if necessary.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>invoice</code> - the invoice to be added</dd>
<dt>Gibt zurück:</dt>
<dd>true if the invoice was successfully added, false otherwise</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="loadInvoice(backend.model.Reimbursement)">
<h3>loadInvoice</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a></span>&nbsp;<span class="element-name">loadInvoice</span><wbr><span class="parameters">(<a href="../model/Reimbursement.html" title="Klasse in backend.model">Reimbursement</a>&nbsp;reimbursement)</span></div>
<div class="block">Loads the invoice associated with the given reimbursement.

 This method retrieves the invoice details from the database using the reimbursement's ID,
 and constructs an <a href="../model/Invoice.html" title="Klasse in backend.model"><code>Invoice</code></a> object including any binary file attached to it.
 The method also sets the user who created the invoice (only by ID).</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>reimbursement</code> - The reimbursement containing the ID used to find the related invoice.</dd>
<dt>Gibt zurück:</dt>
<dd>The corresponding <a href="../model/Invoice.html" title="Klasse in backend.model"><code>Invoice</code></a> object, or <code>null</code> if no invoice is found.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="updateInvoiceIfChanged(backend.model.Invoice,backend.model.Invoice,backend.model.User,boolean)">
<h3>updateInvoiceIfChanged</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">boolean</span>&nbsp;<span class="element-name">updateInvoiceIfChanged</span><wbr><span class="parameters">(<a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&nbsp;oldInvoice,
 <a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a>&nbsp;newInvoice,
 <a href="../model/User.html" title="Klasse in backend.model">User</a>&nbsp;invoiceUser,
 boolean&nbsp;selfmade)</span></div>
<div class="block">Updates an existing invoice in the database if any of its attributes have changed.

 This method compares the old and new invoice data and updates the database accordingly.
 It also triggers a notification and flags the invoice if a self-made change is detected.
 If the invoice was previously not flagged and was changed by the user (selfmade = true),
 the invoice will be flagged and its associated reimbursement status will be set to "FLAGGED".
 Anomaly detection and flagged user tracking will also be triggered in that case.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>oldInvoice</code> - The existing invoice before changes.</dd>
<dd><code>newInvoice</code> - The invoice containing new values to compare.</dd>
<dd><code>invoiceUser</code> - The user associated with the invoice.</dd>
<dd><code>selfmade</code> - Indicates whether the change was made by the user themselves.</dd>
<dt>Gibt zurück:</dt>
<dd><code>true</code> if at least one attribute was changed and updated; otherwise <code>false</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getInvoiceById(int)">
<h3>getInvoiceById</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type"><a href="../model/Invoice.html" title="Klasse in backend.model">Invoice</a></span>&nbsp;<span class="element-name">getInvoiceById</span><wbr><span class="parameters">(int&nbsp;id)</span></div>
<div class="block">Retrieves an invoice from the database by its unique ID.

 The returned invoice includes basic attributes such as ID, date, amount, category, and flagged status.
 It does not include the associated user or file content.</div>
<dl class="notes">
<dt>Parameter:</dt>
<dd><code>id</code> - The ID of the invoice to retrieve.</dd>
<dt>Gibt zurück:</dt>
<dd>The <a href="../model/Invoice.html" title="Klasse in backend.model"><code>Invoice</code></a> object if found; otherwise <code>null</code>.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
